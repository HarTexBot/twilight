<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="twilight-gateway"><meta name="keywords" content="rust, rustlang, rust-lang, twilight_gateway"><title>twilight_gateway - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-52c5db6f6f352e54.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../static.files/light-4743e13df3dfe8c4.css"><link rel="stylesheet" disabled href="../static.files/dark-0e1b889528bd466b.css"><link rel="stylesheet" disabled href="../static.files/ayu-65289d5d067c7c66.css"><script id="default-settings" ></script><script src="../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-ccceecc34bb68766.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../twilight_gateway/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../twilight_gateway/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate twilight_gateway</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.14.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#constants">Constants</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">twilight_gateway</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/twilight_gateway/lib.rs.html#1-44">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="twilight-gateway"><a href="#twilight-gateway">twilight-gateway</a></h2>
<p><a href="https://app.codecov.io/gh/twilight-rs/twilight/"><img src="https://img.shields.io/codecov/c/gh/twilight-rs/twilight?logo=codecov&amp;style=for-the-badge&amp;token=E9ERLJL0L2" alt="codecov badge" /></a> <a href="https://discord.gg/7jj8n7D"><img src="https://img.shields.io/discord/745809834183753828?color=%237289DA&amp;label=discord%20server&amp;logo=discord&amp;style=for-the-badge" alt="discord badge" /></a> <a href="https://github.com/twilight-rs/twilight"><img src="https://img.shields.io/badge/github-twilight-6f42c1.svg?style=for-the-badge&amp;logo=github" alt="github badge" /></a> <a href="https://github.com/twilight-rs/twilight/blob/main/LICENSE.md"><img src="https://img.shields.io/badge/license-ISC-blue.svg?style=for-the-badge&amp;logo=pastebin" alt="license badge" /></a> <img src="https://img.shields.io/badge/rust-1.64+-93450a.svg?style=for-the-badge&amp;logo=rust" alt="rust badge" /></p>
<p><code>twilight-gateway</code> is an implementation of Discord’s sharding gateway sessions.
This is responsible for receiving stateful events in real-time from Discord
and sending <em>some</em> stateful information.</p>
<p>It includes two primary types: the Shard and Cluster.</p>
<p>The Shard handles a single websocket connection and can manage up to 2500
guilds. If you manage a small bot in under about 2000 guilds, then this is
what you use. See the <a href="https://discord.com/developers/docs/topics/gateway#sharding">Discord Docs/Sharding</a> for
more information on sharding.</p>
<p>The Cluster is an interface which manages the health of the shards it
manages and proxies all of their events under one unified stream. This is
useful to use if you have a large bot in over 1000 or 2000 guilds.</p>
<h3 id="examples"><a href="#examples">Examples</a></h3>
<p>There are a few usage examples located in the <a href="https://github.com/twilight-rs/twilight/tree/main/examples">root of the <code>twilight</code>
repository</a>.</p>
<h3 id="features"><a href="#features">Features</a></h3><h4 id="deserialization"><a href="#deserialization">Deserialization</a></h4>
<p><code>twilight-gateway</code> supports <a href="https://crates.io/crates/serde_json"><code>serde_json</code></a> and <a href="https://crates.io/crates/simd-json"><code>simd-json</code></a> for
deserializing and serializing events.</p>
<h5 id="simd-json"><a href="#simd-json"><code>simd-json</code></a></h5>
<p>The <code>simd-json</code> feature enables <a href="https://crates.io/crates/simd-json"><code>simd-json</code></a> support to use simd features
of modern cpus to deserialize responses faster. It is not enabled by
default.</p>
<p>To use this feature you need to also add these lines to
<code>&lt;project root&gt;/.cargo/config</code>:</p>
<div class="example-wrap"><pre class="language-toml"><code>[build]
rustflags = [&quot;-C&quot;, &quot;target-cpu=native&quot;]
</code></pre></div>
<p>you can also use this environment variable <code>RUSTFLAGS=&quot;-C target-cpu=native&quot;</code>.</p>
<div class="example-wrap"><pre class="language-toml"><code>[dependencies]
twilight-gateway = { default-features = false, features = [&quot;rustls-native-roots&quot;, &quot;simd-json&quot;], version = &quot;0.2&quot; }
</code></pre></div><h4 id="tls"><a href="#tls">TLS</a></h4>
<p><strong>Note</strong>: not enabling any TLS feature is support for use behind a proxy;
Discord’s API is HTTPS only.</p>
<p><code>twilight-gateway</code> has features to enable <a href="https://crates.io/crates/tokio-tungstenite"><code>tokio-tungstenite</code></a> and
<a href="https://twilight-rs.github.io/twilight/twilight_http/index.html"><code>twilight-http</code></a>’s TLS features. These features are mutually exclusive.
<code>rustls-native-roots</code> is enabled by default.</p>
<h5 id="native"><a href="#native"><code>native</code></a></h5>
<p>The <code>native</code> feature enables <a href="https://crates.io/crates/tokio-tungstenite"><code>tokio-tungstenite</code></a>’s <code>native-tls</code>
feature as well as <a href="https://twilight-rs.github.io/twilight/twilight_http/index.html"><code>twilight-http</code></a>’s <code>native</code> feature which is mostly
equivalent to using <a href="https://crates.io/crates/native-tls"><code>native-tls</code></a>.</p>
<p>To enable <code>native</code>, do something like this in your <code>Cargo.toml</code>:</p>
<div class="example-wrap"><pre class="language-toml"><code>[dependencies]
twilight-gateway = { default-features = false, features = [&quot;native&quot;], version = &quot;0.2&quot; }
</code></pre></div><h5 id="rustls-native-roots"><a href="#rustls-native-roots"><code>rustls-native-roots</code></a></h5>
<p>The <code>rustls-native-roots</code> feature enables <a href="https://crates.io/crates/tokio-tungstenite"><code>tokio-tungstenite</code></a>’s <code>rustls-tls-native-roots</code> feature and
<a href="https://twilight-rs.github.io/twilight/twilight_http/index.html"><code>twilight-http</code></a>’s <code>rustls-native-roots</code> feature, which use <a href="https://crates.io/crates/rustls"><code>rustls</code></a> as the TLS backend and <a href="https://crates.io/crates/rustls-native-certs"><code>rustls-native-certs</code></a>
for root certificates.</p>
<p>This is enabled by default.</p>
<h5 id="rustls-webpki-roots"><a href="#rustls-webpki-roots"><code>rustls-webpki-roots</code></a></h5>
<p>The <code>rustls-webpki-roots</code> feature enables <a href="https://crates.io/crates/tokio-tungstenite"><code>tokio-tungstenite</code></a>’s <code>rustls-tls-webpki-roots</code> feature and
<a href="https://twilight-rs.github.io/twilight/twilight_http/index.html"><code>twilight-http</code></a>’s <code>rustls-webpki-roots</code> feature, which use <a href="https://crates.io/crates/rustls"><code>rustls</code></a> as the TLS backend and <a href="https://crates.io/crates/webpki-roots"><code>webpki-roots</code></a>
for root certificates.</p>
<p>This should be preferred over <code>rustls-native-roots</code> in Docker containers based on <code>scratch</code>.</p>
<h4 id="zlib"><a href="#zlib">zlib</a></h4>
<p>zlib compression is enabled with one of the two <code>zlib</code> features described below.</p>
<p>There are 2 zlib features <code>zlib-stock</code> and <code>zlib-simd</code>, if both are enabled it
will use <code>zlib-simd</code>.</p>
<p><code>zlib-stock</code> is enabled by default.</p>
<p>Enabling <code>zlib-simd</code> will make the library use <a href="https://github.com/zlib-ng/zlib-ng"><code>zlib-ng</code></a> which is a modern
fork of zlib that is faster and more efficient, but it needs <code>cmake</code> to compile.</p>
<h4 id="metrics"><a href="#metrics">Metrics</a></h4>
<p>The <code>metrics</code> feature provides metrics information via the <code>metrics</code> crate.
Some of the metrics logged are counters about received event counts and
their types and gauges about the capacity and efficiency of the inflater of
each shard.</p>
<p>This is disabled by default.</p>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><div class="item-table"><div class="item-row"><div class="item-left import-item" id="reexport.Cluster"><code>pub use self::cluster::<a class="struct" href="cluster/struct.Cluster.html" title="struct twilight_gateway::cluster::Cluster">Cluster</a>;</code></div></div><div class="item-row"><div class="item-left import-item" id="reexport.ClusterConfig"><code>pub use self::cluster::<a class="struct" href="cluster/struct.Config.html" title="struct twilight_gateway::cluster::Config">Config</a> as ClusterConfig;</code></div></div><div class="item-row"><div class="item-left import-item" id="reexport.ShardConfig"><code>pub use self::shard::<a class="struct" href="shard/struct.Config.html" title="struct twilight_gateway::shard::Config">Config</a> as ShardConfig;</code></div></div><div class="item-row"><div class="item-left import-item" id="reexport.Shard"><code>pub use self::shard::<a class="struct" href="shard/struct.Shard.html" title="struct twilight_gateway::shard::Shard">Shard</a>;</code></div></div><div class="item-row"><div class="item-left import-item" id="reexport.queue"><code>pub use <a class="mod" href="../twilight_gateway_queue/index.html" title="mod twilight_gateway_queue">twilight_gateway_queue</a> as queue;</code></div></div><div class="item-row"><div class="item-left import-item" id="reexport.Event"><code>pub use twilight_model::gateway::event::Event;</code></div></div><div class="item-row"><div class="item-left import-item" id="reexport.EventType"><code>pub use twilight_model::gateway::event::EventType;</code></div></div></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="cluster/index.html" title="twilight_gateway::cluster mod">cluster</a></div><div class="item-right docblock-short">The cluster is a manager for running and maintaining multiple shards,
bringing their event streams into one unified stream.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="shard/index.html" title="twilight_gateway::shard mod">shard</a></div><div class="item-right docblock-short">Types for working with and running connections to the gateway.</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.EventTypeFlags.html" title="twilight_gateway::EventTypeFlags struct">EventTypeFlags</a></div><div class="item-right docblock-short">Bitflags representing all of the possible types of events.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Intents.html" title="twilight_gateway::Intents struct">Intents</a></div><div class="item-right docblock-short">Gateway intents.</div></div></div><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.API_VERSION.html" title="twilight_gateway::API_VERSION constant">API_VERSION</a></div><div class="item-right docblock-short">Discord API version used by this crate.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="twilight_gateway" data-themes="" data-resource-suffix="" data-rustdoc-version="1.68.0-nightly (333ee6c46 2023-01-18)" data-search-js="search-181581080540673f.js" data-settings-js="settings-c3c521c753752a1a.js" data-settings-css="settings-cd1be5fcaa86d99b.css" ></div></body></html>